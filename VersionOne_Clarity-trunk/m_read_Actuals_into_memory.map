{"map":{"execution_options":[{"value":"error","name":"nulls"},{"value":"error","name":"overflow"},{"value":"error","name":"truncation"}],"variables":[{"name":"VersionOne_Actuals_rowset","description":"","is_public":true,"array":false,"type":"DJRowSet","initialValue":"","dims":[]}],"sources":[{"dataset_rref":"m_read_Actuals_into_memory_src_ds","schema":{"type_defs":[{"name":"Assets_._type","groups":[{"sequence":[{"external":{"type":"String attribute"},"name":"total","type":"string","length":1},{"external":{"type":"String attribute"},"name":"pageSize","type":"string","length":10},{"external":{"type":"String attribute"},"name":"pageStart","type":"string","length":1},{"rec_type_ref":"Actual_._type","max_occurs":"unbounded","name":"Actual"}],"name":"Assets_._type_group"}]},{"name":"Actual_._type","groups":[{"sequence":[{"external":{"type":"String attribute"},"name":"href","type":"string","length":41},{"external":{"type":"String attribute"},"name":"id","type":"string","length":11},{"external":{"type":"String"},"name":"Scope.Reference","type":"string","length":6},{"external":{"type":"String"},"name":"Value","type":"string","length":3},{"external":{"type":"String"},"name":"Date","type":"string","length":10},{"external":{"type":"String"},"name":"Workitem.Number","type":"string","length":8},{"external":{"type":"String"},"name":"Workitem.Reference","type":"string","length":10},{"external":{"type":"String"},"name":"Member.Email","type":"string","length":34},{"external":{"type":"String"},"name":"ChangeDateUTC","type":"string","length":23}],"name":"Actual_._type_group"}]}],"rule_defs":{},"description":null,"ui":null,"root_defs":[{"sequence":[{"rec_type_ref":"Assets_._type","name":"Assets"}],"name":"DocumentRoot"}]},"properties":[{"value":"error","name":"schema_mismatch"}],"name":"SOURCE","control_links":[{"src_path":"/SOURCE/Assets","trg_paths":[{"rules":[{"map_event":{"parameters":[],"name":"SourceStarted"},"condition":"","else_actions":[],"if_actions":[{"parameters":[{"value":"Set VersionOne_Actuals_rowset = new DJRowSet \"VersionOne_Actuals_rowset\"","name":"expression"}],"name":"ExecuteExpression"}]}],"ui_visible":true,"trg_path":"/TARGET_1/R1"}]},{"src_path":"/SOURCE/Assets/Actual","trg_paths":[{"rules":[{"map_event":{"parameters":[],"name":"RecordStarted"},"condition":"","else_actions":[],"if_actions":[{"parameters":[{"value":"1","name":"count_expression"},{"value":"false","name":"preserve"}],"name":"OutputRecord"},{"parameters":[{"value":"' The -1 in the last column is a placeholder for the internalTaskID if it is needed later (if a new task is created)\r'VersionOne_Actuals_rowset.Append(FieldAt(\"/SOURCE/Assets/Actual/Member.Email\"), FieldAt(\"/SOURCE/Assets/Actual/Scope.Reference\"), FieldAt(\"/SOURCE/Assets/Actual/Workitem.Reference\"), FieldAt(\"/SOURCE/Assets/Actual/Date\"), FieldAt(\"/SOURCE/Assets/Actual/Value\"), FieldAt(\"/SOURCE/Assets/Actual/Workitem.Number\"), \"-1\")\r\rcounter = 1\rmatchedActual = False\rWhile counter <= VersionOne_Actuals_rowset.Size\r\tIf FieldAt(\"/SOURCE/Assets/Actual/Member.Email\") == VersionOne_Actuals_rowset.Value(counter, 1) And FieldAt(\"/SOURCE/Assets/Actual/Scope.Reference\") == VersionOne_Actuals_rowset.Value(counter, 2) And FieldAt(\"/SOURCE/Assets/Actual/Workitem.Reference\") == VersionOne_Actuals_rowset.Value(counter, 3) And FieldAt(\"/SOURCE/Assets/Actual/Date\") == VersionOne_Actuals_rowset.Value(counter, 4) Then\r\t\t' Found a matching Actual on the same day, add the incoming value to it\r\t\tVersionOne_Actuals_rowset.Value(counter, 5) = VersionOne_Actuals_rowset.Value(counter, 5) + FieldAt(\"/SOURCE/Assets/Actual/Value\")\r\t\tcounter = VersionOne_Actuals_rowset.Size\r\t\tmatchedActual = True\r\tEnd If\r\tcounter = counter + 1\rWend\r\rIf Not matchedActual Then\r\t' The -1 in the last column is a placeholder for the internalTaskID if it is needed later (if a new task is created)\r\tVersionOne_Actuals_rowset.Append(FieldAt(\"/SOURCE/Assets/Actual/Member.Email\"), FieldAt(\"/SOURCE/Assets/Actual/Scope.Reference\"), FieldAt(\"/SOURCE/Assets/Actual/Workitem.Reference\"), FieldAt(\"/SOURCE/Assets/Actual/Date\"), FieldAt(\"/SOURCE/Assets/Actual/Value\"), FieldAt(\"/SOURCE/Assets/Actual/Workitem.Number\"), \"-1\")\rEnd If\r","name":"expression"}],"name":"ExecuteExpression"}]}],"ui_visible":true,"trg_path":"/TARGET_1/R1"}]}]}],"targets":[{"schema":{"type_defs":[{"name":"R1","groups":[{"sequence":[{"total_digits":"9","external":{"type":"Integer","signed":true},"type":"int","name":"Record Number"}],"name":"R1"}]}],"rule_defs":{},"description":null,"ui":null,"root_defs":[{"max_occurs":"unbounded","choice":[{"rec_type_ref":"R1","name":"R1"}],"name":"DocumentRoot"}]},"properties":[{"value":"false","name":"multimode_target"},{"value":"error","name":"schema_mismatch"}],"name":"TARGET_1","map_rules":{},"dataset_rref":"m_read_Actuals_into_memory_trg_ds"}]}}
