{"externalSessions":[],"breakOnFirstError":true,"script_libraries":[],"variables":[],"links":[{"decision":"","target":"Query - Min date","data":"332.5,91 380,91","source":"Setup REST Min call"},{"decision":"","target":"Stop","data":"1120.5,91 1199,91","source":"Parse Max date"},{"decision":"","target":"Setup REST Max call","data":"647.5,91 692.5,91","source":"Parse Min date"},{"decision":"","target":"Setup REST Min call","data":"160,91 219.5,91","source":"Start"},{"decision":"","target":"Parse Min date","data":"496,91 542.5,91","source":"Query - Min date"},{"decision":"","target":"Query - Max date","data":"809.5,91 859.5,91","source":"Setup REST Max call"},{"decision":"","target":"Parse Max date","data":"954.5,91 1011.5,91","source":"Query - Max date"}],"ui":{"paletteY":315,"dividerY":311,"paletteX":110},"maxThreads":1,"steps":[{"name":"Parse Max date","script":"","type":"Script","enabled":true,"y":50,"x":1012,"ignoreError":false,"description":"","expression":"Dim outMsg as DJMessage\r\rSet outMsg = FindMessage(\"outMsg\")\r\r'Parse the date out of the REST response\rmaxDate = Parse(1, Parse(2, outMsg.Body, \"<Attribute name=\"\"Date\"\">\"), \"</Attribute>\")\rDefineMacro(\"MaxActualDate\", maxDate)\r\rLogMessage(\"info\", \">>>>> Maximum Actual date: \" & MacroValue(\"MaxActualDate\"))"},{"name":"Parse Min date","script":"","type":"Script","enabled":true,"y":50,"x":543,"ignoreError":false,"description":"","expression":"Dim outMsg as DJMessage\r\rSet outMsg = FindMessage(\"outMsg\")\r\r'Parse the date out of the REST response\rminDate = Parse(1, Parse(2, outMsg.Body, \"<Attribute name=\"\"Date\"\">\"), \"</Attribute>\")\rIf Len(Trim(minDate)) > 0 Then\r\tminDate = DateConvert(\"mm/dd/yyyy\", \"yyyy-mm-dd\", DateAdd(\"d\", -7, DateValue(minDate)))\r\tDefineMacro(\"MinActualDate\", minDate)\rElse\r\tDefineMacro(\"MinActualDate\", \"\")\rEnd If\r\rLogMessage(\"info\", \">>>>> Minimum Actual date: \" & MacroValue(\"MinActualDate\"))"},{"name":"Query - Max date","options":[{"value":"GET","name":"httpMethod"},{"value":"sel=Date&where=ChangeDateUTC%3E'$(QueryDate)'&sort=-Date&page=1,0","name":"urlQueryString"},{"value":"","name":"soapAction"},{"value":"5","name":"retryCount"},{"value":"30","name":"timeout"},{"value":"true","name":"logHeaders"},{"value":"","name":"responseFile"}],"parameters":[{"position":0,"value":"inMsg","name":"SourceMessage"},{"position":1,"value":"outMsg","name":"TargetMessage"}],"action":"Execute","type":"Invoker","component":"VersionOne REST Invoker - Actuals","enabled":true,"y":50,"x":860,"ignoreError":false,"description":""},{"name":"Query - Min date","options":[{"value":"GET","name":"httpMethod"},{"value":"sel=Date&where=ChangeDateUTC%3E'$(QueryDate)'&sort=Date&page=1,0","name":"urlQueryString"},{"value":"","name":"soapAction"},{"value":"5","name":"retryCount"},{"value":"30","name":"timeout"},{"value":"true","name":"logHeaders"},{"value":"","name":"responseFile"}],"parameters":[{"position":0,"value":"inMsg","name":"SourceMessage"},{"position":1,"value":"outMsg","name":"TargetMessage"}],"action":"Execute","type":"Invoker","component":"VersionOne REST Invoker - Actuals","enabled":true,"y":50,"x":380,"ignoreError":false,"description":""},{"name":"Setup REST Max call","script":"","type":"Script","enabled":true,"y":50,"x":693,"ignoreError":false,"description":"","expression":"'Setup Rest Invoker to call VersionOne Actual module for max date of Actuals that have been added or changed since the data supplied."},{"name":"Setup REST Min call","script":"","type":"Script","enabled":true,"y":50,"x":220,"ignoreError":false,"description":"","expression":"'Setup Rest Invoker to call VersionOne Actual module for min date of Actuals that have been added or changed since the data supplied.\r\r' NEED TO SET QUERY DATE MACRO?\r"},{"name":"Start","script":"","type":"Start","enabled":true,"y":50,"x":100,"ignoreError":false,"description":"","expression":"Dim inMsg as DJMessage\rDim outMsg as DJMessage\r\rSet inMsg = new DJMessage \"inMsg\"\rSet outMsg = new DJMessage \"outMsg\""},{"name":"Stop","script":"","type":"Stop","enabled":true,"y":50,"x":1199,"ignoreError":false,"description":"","expression":"Set inMsg = nothing\rSet outMsg = nothing\r"}],"components":[{"name":"VersionOne REST Invoker - Actuals","options":[{"value":"HTTP","name":"protocol","description":null,"hidden":false,"displayname":"Protocol","displayvalue":"HTTP","editable":true},{"value":"$(VersionOne_endpoint)Actual","name":"url","description":null,"hidden":false,"displayname":"URL","displayvalue":"$(VersionOne_endpoint)Actual","editable":true},{"value":"URL","name":"sendUrlData","description":null,"hidden":false,"displayname":"Send Source Via","displayvalue":"URL","editable":true},{"value":"UTF-8","name":"globalEncoding","description":null,"hidden":false,"displayname":"Message Encoding","displayvalue":"UTF-8","editable":true},{"value":"text/xml; charset=UTF-8","name":"contentType","description":null,"hidden":false,"displayname":"Content Type","displayvalue":"text/xml; charset=UTF-8","editable":true},{"value":"$(VersionOne_username)","name":"httpUsername","description":null,"hidden":false,"displayname":"HTTP Username","displayvalue":"$(VersionOne_username)","editable":true},{"value":"$(VersionOne_password)","name":"httpPassword","description":null,"hidden":false,"displayname":"HTTP Password","displayvalue":"$(VersionOne_password)","editable":true},{"value":"","name":"userDomain","description":null,"hidden":false,"displayname":"Domain (NTLM Only)","displayvalue":"","editable":true},{"value":"","name":"proxyServer","description":null,"hidden":false,"displayname":"Proxy Server","displayvalue":"","editable":true},{"value":"","name":"proxyPort","description":null,"hidden":false,"displayname":"Proxy Port","displayvalue":"","editable":true},{"value":"","name":"proxyUser","description":null,"hidden":false,"displayname":"Proxy Username","displayvalue":"","editable":true},{"value":"","name":"proxyPswd","description":null,"hidden":false,"displayname":"Proxy Password","displayvalue":"","editable":true}],"type":"REST Invoker 1.0.0","componentType":"Invoker","globalTransaction":false}],"externalDatasets":[],"sessions":[],"annotations":[]}
